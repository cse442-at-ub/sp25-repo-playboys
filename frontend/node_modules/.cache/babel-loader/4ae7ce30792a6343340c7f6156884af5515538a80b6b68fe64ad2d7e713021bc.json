{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{element}=_ref;const[isAuthenticated,setIsAuthenticated]=useState(null);useEffect(()=>{const checkAuth=async()=>{try{const response=await fetch(`${process.env.REACT_APP_API_URL}backend/independentCookieAuth.php`,{method:\"GET\",credentials:\"include\"// Sends cookies with request\n});const result=await response.json();if(result.status===\"success\"){setIsAuthenticated(true);}else{setIsAuthenticated(false);}}catch(error){console.error(\"Error authenticating user:\",error);setIsAuthenticated(false);}};checkAuth();},[]);if(isAuthenticated===null){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show a loading state while checking auth\n}return isAuthenticated?element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});};export default ProtectedRoute;","map":{"version":3,"names":["React","useEffect","useState","Navigate","jsx","_jsx","ProtectedRoute","_ref","element","isAuthenticated","setIsAuthenticated","checkAuth","response","fetch","process","env","REACT_APP_API_URL","method","credentials","result","json","status","error","console","children","to"],"sources":["/Users/camdenbartlo/UB/Sem 4/CSE 442/sp25-repo-playboys/frontend/src/ProtectedRoute.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ element }: { element: React.ReactElement }) => {\n  const [isAuthenticated, setIsAuthenticated] = useState<boolean | null>(null);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const response = await fetch(`${process.env.REACT_APP_API_URL}backend/independentCookieAuth.php`, {\n          method: \"GET\",\n          credentials: \"include\", // Sends cookies with request\n        });\n\n        const result = await response.json();\n\n        if (result.status === \"success\") {\n          setIsAuthenticated(true);\n        } else {\n          setIsAuthenticated(false);\n        }\n      } catch (error) {\n        console.error(\"Error authenticating user:\", error);\n        setIsAuthenticated(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  if (isAuthenticated === null) {\n    return <div>Loading...</div>; // Show a loading state while checking auth\n  }\n\n  return isAuthenticated ? element : <Navigate to=\"/login\" />;\n};\n\nexport default ProtectedRoute;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAkD,IAAjD,CAAEC,OAAyC,CAAC,CAAAD,IAAA,CAClE,KAAM,CAACE,eAAe,CAAEC,kBAAkB,CAAC,CAAGR,QAAQ,CAAiB,IAAI,CAAC,CAE5ED,SAAS,CAAC,IAAM,CACd,KAAM,CAAAU,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,mCAAmC,CAAE,CAChGC,MAAM,CAAE,KAAK,CACbC,WAAW,CAAE,SAAW;AAC1B,CAAC,CAAC,CAEF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAEpC,GAAID,MAAM,CAACE,MAAM,GAAK,SAAS,CAAE,CAC/BX,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAC,IAAM,CACLA,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAE,MAAOY,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDZ,kBAAkB,CAAC,KAAK,CAAC,CAC3B,CACF,CAAC,CAEDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIF,eAAe,GAAK,IAAI,CAAE,CAC5B,mBAAOJ,IAAA,QAAAmB,QAAA,CAAK,YAAU,CAAK,CAAC,CAAE;AAChC,CAEA,MAAO,CAAAf,eAAe,CAAGD,OAAO,cAAGH,IAAA,CAACF,QAAQ,EAACsB,EAAE,CAAC,QAAQ,CAAE,CAAC,CAC7D,CAAC,CAED,cAAe,CAAAnB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}